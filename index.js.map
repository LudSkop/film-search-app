{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["\nimport axios from 'axios'\n\n\n const BASE_URL = 'https://api.themoviedb.org/3/'\n const ENDPOINT = 'trending/movie/week';\n //const KEY_API = import.meta.env.VITE_TMDB_API_KEY;\nconst KEY_API = \"db3bf6017741aebd99ceac23878d0092\";\n const container = document.querySelector(\".js-movie-list\");\n const loadMore = document.querySelector(\".js-load-more\");\n loadMore.addEventListener(\"click\", onLoadMore);\n\n\n let page = 1;\n\n\nasync function serviceMovie(page=1) {\n    const response = await axios.get(`${BASE_URL}${ENDPOINT}`, {\n        params: {\n            api_key: KEY_API,\n            page: page\n        }\n    });\n    return response.data;\n}\n\nserviceMovie()\n    .then(data => {\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n        if (data.page < data.total_pages){\n          loadMore.classList.replace(\"load-more-hidden\", \"js-load-more\");  \n        } \n       \n    })\n    .catch(error => {\n        console.log(error);\n    })\n //<a href=\"https://www.themoviedb.org/movie/${id}\" target=\"_blank\">\nfunction createMarkup(arr){\n    const BASE_IMG_URL = \"https://image.tmdb.org/t/p/w500\";\n    return arr.map(({id, original_title, vote_average, poster_path, release_date })=> `\n    <li class=\"movie-card\">\n        <img src=\"${poster_path ? BASE_IMG_URL + poster_path : 'https://via.placeholder.com/500x750'}\" \n        alt=\"${original_title}\"/>\n        <div class=\"movie-info\">\n       \n        <h2> üé¨ ${original_title}</h2>\n        <h3>üìÖ Release Date: ${release_date}</h3>\n        <h3>‚≠ê Rating: ${vote_average}</h3>\n        <button class=\"trailer-btn\" data-id=\"${id}\">\n                üé• Watch Trailer\n            </button>\n        </div>\n    </li>\n    `).join(\"\");\n}\n\nasync function onLoadMore(event){\n    page++;\n     loadMore.disabled = true;\n\n    try {\n        console.log(\"–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–ª—ñ–∫—ñ–≤: \", page);\n        const data = await serviceMovie(page);\n        console.log(data);\n        container.insertAdjacentHTML(\"beforeend\", createMarkup(data.results));\n          const card = document.querySelector(\".movie-card\");\n            const cardHeight = card. getBoundingClientRect().height;\n            console.log(\"–≤–∏—Å–æ—Ç–∞ –∫–∞—Ä—Ç–∫–∏:\", cardHeight);\n            window.scrollBy({\n                left: 0,\n                top: cardHeight * 5,\n                behavior: \"smooth\",\n            })\n        if (data.page >= data.total_pages) {\n            loadMore.classList.replace( \"js-load-more\", \"load-more-hidden\");\n          \n        }\n\n    } catch(error){\n        alert(error.message);\n    } finally {\n        loadMore.disabled = false;\n    }\n\n}\nconst modal = document.getElementById(\"trailer-modal\");\nconst iframe = document.getElementById(\"trailer-frame\");\nconst closeBtn = document.querySelector(\".close-btn\");\n\nfunction openModal(videoKey) {\n    iframe.src = `https://www.youtube.com/embed/${videoKey}`;\n    modal.style.display = \"flex\";\n}\n\nfunction closeModal() {\n    iframe.src = \"\";\n    modal.style.display = \"none\";\n}\n\ncloseBtn.addEventListener(\"click\", closeModal);\n\nwindow.addEventListener(\"click\", (e) => {\n    if (e.target === modal) {\n        closeModal();\n    }\n});\nasync function getTrailer(movieId) {\n    const response = await axios.get(\n        `https://api.themoviedb.org/3/movie/${movieId}/videos`,\n        {\n            params: {\n                api_key: KEY_API\n            }\n        }\n    );\n\n    return response.data.results;\n}\ncontainer.addEventListener(\"click\", async (e) => {\n    if (e.target.classList.contains(\"trailer-btn\")) {\n        const movieId = e.target.dataset.id;\n        \n        try {\n            const videos = await getTrailer(movieId);\n            const trailer = videos.find(v => v.type === \"Trailer\" && v.site === \"YouTube\");\n            \n            if (trailer) {\n                openModal(trailer.key);\n            } else {\n                alert(\"Trailer not found\");\n            }\n        } catch (error) {\n            alert(error.message);\n        }\n    }\n});\n"],"names":["BASE_URL","ENDPOINT","KEY_API","container","loadMore","onLoadMore","page","serviceMovie","axios","data","createMarkup","error","arr","BASE_IMG_URL","id","original_title","vote_average","poster_path","release_date","event","cardHeight","modal","iframe","closeBtn","openModal","videoKey","closeModal","getTrailer","movieId","trailer","v"],"mappings":"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"}